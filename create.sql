create table tb_address (id int8 generated by default as identity, address varchar(255), address_complement varchar(255), city varchar(255), neighborhood varchar(255), number int4, payment boolean, state varchar(255), status boolean, zip_code varchar(255), client_id int8, primary key (id));
create table tb_category (id int8 generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, name varchar(255), status boolean, updated_at TIMESTAMP WITHOUT TIME ZONE, primary key (id));
create table tb_client (id int8 generated by default as identity, cpf varchar(255), first_name varchar(255), last_name varchar(255), login varchar(255), password varchar(255), status boolean, primary key (id));
create table tb_client_role (client_id int8 not null, role_id int8 not null, primary key (client_id, role_id));
create table tb_image (id int8 generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, img_url TEXT, principal boolean, status boolean, updated_at TIMESTAMP WITHOUT TIME ZONE, product_id int8, primary key (id));
create table tb_order_product (order_id int8 not null, product_id int8 not null);
create table tb_orders (id int8 generated by default as identity, shipping float8, status boolean, total_value float8, value float8, address_id int8, client_id int8, payment_id int8, primary key (id));
create table tb_payment (id int8 generated by default as identity, cvv int4, number_card int4, payment varchar(255), plots int4, status boolean, valid_thru int4, client_id int8, primary key (id));
create table tb_product (id int8 generated by default as identity, author varchar(255), created_at TIMESTAMP WITHOUT TIME ZONE, description TEXT, edition varchar(255), pages int4, price float8, publisher varchar(255), quantity int4, rating float8, size varchar(255), status boolean, title varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, year int4, primary key (id));
create table tb_product_category (product_id int8 not null, category_id int8 not null, primary key (product_id, category_id));
create table tb_role (id int8 generated by default as identity, authority varchar(255), primary key (id));
create table tb_user (id int8 generated by default as identity, address varchar(255), address_complement varchar(255), city varchar(255), country varchar(255), cpf varchar(255), login varchar(255), name varchar(255), number int4, password varchar(255), state varchar(255), status boolean, zip_code varchar(255), primary key (id));
create table tb_user_role (user_id int8 not null, role_id int8 not null, primary key (user_id, role_id));
alter table if exists tb_client add constraint UK_q5ytvlvjsf67yw11ydrh4xwrj unique (cpf);
alter table if exists tb_client add constraint UK_elyk72q8sk3d936a6q7wbt04n unique (login);
alter table if exists tb_user add constraint UK_869sa3rebuf3nm0d4jwxdtouk unique (cpf);
alter table if exists tb_user add constraint UK_qht682qvopcx5f41dc2rbs5jf unique (login);
alter table if exists tb_address add constraint FKmgkeodciwq4rofwws5m08v1yh foreign key (client_id) references tb_client;
alter table if exists tb_client_role add constraint FKcy1gcv6wya3x467j93r061t9p foreign key (role_id) references tb_role;
alter table if exists tb_client_role add constraint FKa4i5py4f21jvbfvxg6a1fhf62 foreign key (client_id) references tb_client;
alter table if exists tb_image add constraint FKeraxdqw9lc6v4hcx5xpfo657q foreign key (product_id) references tb_product;
alter table if exists tb_order_product add constraint FKsu03ywlcvyqg5y78qey2q25lc foreign key (product_id) references tb_product;
alter table if exists tb_order_product add constraint FKhitniia2k29ekwlcoog5n5u47 foreign key (order_id) references tb_orders;
alter table if exists tb_orders add constraint FKsom8rqx2ollydhp519ef4v2x6 foreign key (address_id) references tb_address;
alter table if exists tb_orders add constraint FKptusl38cw1ntxpvbymqox22w6 foreign key (client_id) references tb_client;
alter table if exists tb_orders add constraint FK78vor6ub22w97vca9ycta60es foreign key (payment_id) references tb_payment;
alter table if exists tb_payment add constraint FK59x1tx5obunwf6wmuyunnwv64 foreign key (client_id) references tb_client;
alter table if exists tb_product_category add constraint FK5r4sbavb4nkd9xpl0f095qs2a foreign key (category_id) references tb_category;
alter table if exists tb_product_category add constraint FKgbof0jclmaf8wn2alsoexxq3u foreign key (product_id) references tb_product;
alter table if exists tb_user_role add constraint FKea2ootw6b6bb0xt3ptl28bymv foreign key (role_id) references tb_role;
alter table if exists tb_user_role add constraint FK7vn3h53d0tqdimm8cp45gc0kl foreign key (user_id) references tb_user;
create table tb_address (id int8 generated by default as identity, address varchar(255), address_complement varchar(255), city varchar(255), neighborhood varchar(255), number int4, payment boolean, state varchar(255), status boolean, zip_code varchar(255), client_id int8, primary key (id));
create table tb_category (id int8 generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, name varchar(255), status boolean, updated_at TIMESTAMP WITHOUT TIME ZONE, primary key (id));
create table tb_client (id int8 generated by default as identity, cpf varchar(255), first_name varchar(255), last_name varchar(255), login varchar(255), password varchar(255), status boolean, primary key (id));
create table tb_client_role (client_id int8 not null, role_id int8 not null, primary key (client_id, role_id));
create table tb_image (id int8 generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, img_url TEXT, principal boolean, status boolean, updated_at TIMESTAMP WITHOUT TIME ZONE, product_id int8, primary key (id));
create table tb_order_product (order_id int8 not null, product_id int8 not null);
create table tb_orders (id int8 generated by default as identity, shipping float8, status boolean, total_value float8, value float8, address_id int8, client_id int8, payment_id int8, primary key (id));
create table tb_payment (id int8 generated by default as identity, cvv int4, number_card int4, payment varchar(255), plots int4, status boolean, valid_thru int4, client_id int8, primary key (id));
create table tb_product (id int8 generated by default as identity, author varchar(255), created_at TIMESTAMP WITHOUT TIME ZONE, description TEXT, edition varchar(255), pages int4, price float8, publisher varchar(255), quantity int4, rating float8, size varchar(255), status boolean, title varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, year int4, primary key (id));
create table tb_product_category (product_id int8 not null, category_id int8 not null, primary key (product_id, category_id));
create table tb_role (id int8 generated by default as identity, authority varchar(255), primary key (id));
create table tb_user (id int8 generated by default as identity, address varchar(255), address_complement varchar(255), city varchar(255), country varchar(255), cpf varchar(255), login varchar(255), name varchar(255), number int4, password varchar(255), state varchar(255), status boolean, zip_code varchar(255), primary key (id));
create table tb_user_role (user_id int8 not null, role_id int8 not null, primary key (user_id, role_id));
alter table if exists tb_client add constraint UK_q5ytvlvjsf67yw11ydrh4xwrj unique (cpf);
alter table if exists tb_client add constraint UK_elyk72q8sk3d936a6q7wbt04n unique (login);
alter table if exists tb_user add constraint UK_869sa3rebuf3nm0d4jwxdtouk unique (cpf);
alter table if exists tb_user add constraint UK_qht682qvopcx5f41dc2rbs5jf unique (login);
alter table if exists tb_address add constraint FKmgkeodciwq4rofwws5m08v1yh foreign key (client_id) references tb_client;
alter table if exists tb_client_role add constraint FKcy1gcv6wya3x467j93r061t9p foreign key (role_id) references tb_role;
alter table if exists tb_client_role add constraint FKa4i5py4f21jvbfvxg6a1fhf62 foreign key (client_id) references tb_client;
alter table if exists tb_image add constraint FKeraxdqw9lc6v4hcx5xpfo657q foreign key (product_id) references tb_product;
alter table if exists tb_order_product add constraint FKsu03ywlcvyqg5y78qey2q25lc foreign key (product_id) references tb_product;
alter table if exists tb_order_product add constraint FKhitniia2k29ekwlcoog5n5u47 foreign key (order_id) references tb_orders;
alter table if exists tb_orders add constraint FKsom8rqx2ollydhp519ef4v2x6 foreign key (address_id) references tb_address;
alter table if exists tb_orders add constraint FKptusl38cw1ntxpvbymqox22w6 foreign key (client_id) references tb_client;
alter table if exists tb_orders add constraint FK78vor6ub22w97vca9ycta60es foreign key (payment_id) references tb_payment;
alter table if exists tb_payment add constraint FK59x1tx5obunwf6wmuyunnwv64 foreign key (client_id) references tb_client;
alter table if exists tb_product_category add constraint FK5r4sbavb4nkd9xpl0f095qs2a foreign key (category_id) references tb_category;
alter table if exists tb_product_category add constraint FKgbof0jclmaf8wn2alsoexxq3u foreign key (product_id) references tb_product;
alter table if exists tb_user_role add constraint FKea2ootw6b6bb0xt3ptl28bymv foreign key (role_id) references tb_role;
alter table if exists tb_user_role add constraint FK7vn3h53d0tqdimm8cp45gc0kl foreign key (user_id) references tb_user;
